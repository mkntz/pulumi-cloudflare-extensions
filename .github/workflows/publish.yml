name: Publish

on:
  push:
    tags:
      - "v*.*.*"

permissions:
  id-token: write # Required for OIDC
  contents: read

jobs:
  lint-test-build:
    uses: ./.github/workflows/lint-test-build.yml

  publish:
    name: Publish
    runs-on: ubuntu-latest
    needs: lint-test-build
    steps:
      - name: Prepare Node.js project
        uses: mkntz/actions-nodejs-prepare@v0

      - name: Publish package to NPM
        run: npm publish
